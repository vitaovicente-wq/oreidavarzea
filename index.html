<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>O Rei da Várzea — Protótipo</title>
<style>
  :root{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;}
  body{margin:0;background:#f5f7fb;color:#111}
  header{background:#0b6bd6;color:#fff;padding:14px 18px}
  .container{max-width:1100px;margin:18px auto;padding:10px}
  .card{background:#fff;border-radius:8px;box-shadow:0 6px 18px rgba(0,0,0,0.06);padding:16px;margin-bottom:16px;}
  label{display:block;margin-top:8px}
  input[type=text], select{width:100%;padding:10px;border:1px solid #ddd;border-radius:6px}
  button{background:#0b6bd6;color:#fff;border:none;padding:10px 14px;border-radius:8px;cursor:pointer}
  button[disabled]{opacity:0.5;cursor:default}
  table{width:100%;border-collapse:collapse;font-size:14px}
  th,td{padding:8px;border-bottom:1px solid #eee;text-align:left}
  th{background:#fafafa;position:sticky;top:0}
  .inline-muted{color:#666;font-size:13px}
  .controls{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  .bench{display:flex;flex-direction:column;gap:6px;max-height:260px;overflow:auto;padding:8px;border:1px dashed #ccc;border-radius:8px}
  .player-card{padding:8px;border-radius:8px;background:#fff;border:1px solid #eee;margin-bottom:6px;cursor:grab;display:flex;justify-content:space-between;align-items:center}
  .muted{color:#666;font-size:13px}
  .position-slot{width:90px;height:40px;border-radius:6px;background:rgba(255,255,255,0.9);display:flex;align-items:center;justify-content:center;cursor:pointer;margin:6px}
  .pitch{width:100%;height:420px;background:linear-gradient(#73c26b,#5eb95e);border-radius:12px;padding:12px;box-sizing:border-box}
</style>
</head>
<body>

<header>
  <div class="container">
    <h1>O Rei da Várzea — Protótipo</h1>
  </div>
</header>

<div class="container">

  <!-- Tela 1 -->
  <div id="tela1" class="card">
    <h2>Tela 1 — Cadastro</h2>
    <label>Nome do seu time
      <input id="teamName" type="text" placeholder="Ex: Os Meninos da Rua" />
    </label>
    <label>Seu nome
      <input id="userName" type="text" placeholder="Seu nome" />
    </label>
    <label>Cidade
      <input id="cityName" type="text" placeholder="Cidade" />
    </label>
    <div style="margin-top:12px" class="controls">
      <button id="btnToTela2" disabled>Contratar jogadores</button>
      <div class="inline-muted">Preencha todos os campos para habilitar.</div>
    </div>
  </div>

  <!-- Tela 2 -->
  <div id="tela2" class="card" style="display:none">
    <h2>Tela 2 — Mercado de Jogadores</h2>
    <div id="marketMessage" style="margin-bottom:10px;font-weight:bold">
      Escolha no mínimo 2 goleiros para o seu time
    </div>
    <div style="margin-top:10px;overflow:auto;max-height:520px">
      <table id="playersTable">
        <thead>
          <tr>
            <th>Nome</th>
            <th>Posição</th>
            <th>Pé</th>
            <th>Idade</th>
            <th>Salário</th>
            <th>Contratar</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <div style="margin-top:12px" class="controls">
      <button id="btnNextStep">Próximo</button>
      <button id="btnEscalar" disabled>Escalar time</button>
      <div>
        <strong>Dinheiro em caixa:</strong>
        <span id="cashDisplay">R$ 5.000</span> |
        <span class="muted">Elenco <span id="selectedCount">0</span>/22</span>
      </div>
    </div>
  </div>

  <!-- Tela 3 -->
  <div id="tela3" class="card" style="display:none">
    <h2>Tela 3 — Escalação</h2>
    <div class="row">
      <div style="flex:1">
        <div class="card">
          <h3>Escalação</h3>
          <div class="pitch" id="pitch">
            <div style="display:flex;flex-wrap:wrap;justify-content:center">
              <div class="position-slot" data-pos="GK" data-posLabel="GK" ondrop="dropHandler(event)" ondragover="allowDrop(event)">GK</div>
            </div>
            <div style="display:flex;justify-content:space-between;margin-top:12px">
              <div class="position-slot" data-pos="LB" data-posLabel="LB" ondrop="dropHandler(event)" ondragover="allowDrop(event)">LB</div>
              <div class="position-slot" data-pos="CB1" data-posLabel="CB" ondrop="dropHandler(event)" ondragover="allowDrop(event)">CB</div>
              <div class="position-slot" data-pos="CB2" data-posLabel="CB" ondrop="dropHandler(event)" ondragover="allowDrop(event)">CB</div>
              <div class="position-slot" data-pos="RB" data-posLabel="RB" ondrop="dropHandler(event)" ondragover="allowDrop(event)">RB</div>
            </div>
            <div style="display:flex;justify-content:space-around;margin-top:12px">
              <div class="position-slot" data-pos="DM" data-posLabel="VOL" ondrop="dropHandler(event)" ondragover="allowDrop(event)">VOL</div>
              <div class="position-slot" data-pos="CM1" data-posLabel="MEI" ondrop="dropHandler(event)" ondragover="allowDrop(event)">MEI</div>
              <div class="position-slot" data-pos="CM2" data-posLabel="MEI" ondrop="dropHandler(event)" ondragover="allowDrop(event)">MEI</div>
            </div>
            <div style="display:flex;justify-content:space-between;margin-top:12px">
              <div class="position-slot" data-pos="LW" data-posLabel="AE" ondrop="dropHandler(event)" ondragover="allowDrop(event)">AE</div>
              <div class="position-slot" data-pos="ST" data-posLabel="ATA" ondrop="dropHandler(event)" ondragover="allowDrop(event)">ATA</div>
              <div class="position-slot" data-pos="RW" data-posLabel="AD" ondrop="dropHandler(event)" ondragover="allowDrop(event)">AD</div>
            </div>
          </div>
        </div>
        <div style="margin-top:10px" class="controls">
          <button id="btnPlayMatch" disabled>Jogar partida</button>
        </div>
      </div>
      <div style="width:320px">
        <div class="card">
          <h3>Banco</h3>
          <div class="bench" id="bench"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tela 4 -->
  <div id="tela4" class="card" style="display:none">
    <h2>Partida em andamento</h2>
    <div class="row">
      <div style="flex:1">
        <h3 id="userTeamName">Meu Time</h3>
        <ul id="jogadoresUsuario"></ul>
      </div>
      <div style="flex:2;text-align:center">
        <h2 id="placar">0 x 0</h2>
        <div id="comentarios" style="text-align:left;max-height:300px;overflow:auto;border:1px solid #ddd;border-radius:6px;padding:10px"></div>
        <button id="btnContinuar" style="margin-top:10px;display:none">Continuar</button>
      </div>
      <div style="flex:1">
        <h3>Vila Freitas</h3>
        <ul id="jogadoresVila"></ul>
      </div>
    </div>
  </div>

</div>

<script>
// (JS igual ao anterior, mas com marketStep iniciando em 1 (goleiros) e renderMarket chamado já filtrando "Goleiro")
</script>

</body>
</html>
