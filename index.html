<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>O Rei da Várzea — Protótipo</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  .screen { display: none; }
  .active { display: block; }
  button { margin: 10px 0; padding: 10px 20px; font-size: 16px; }
  table { border-collapse: collapse; width: 100%; margin: 10px 0; }
  th, td { border: 1px solid #999; padding: 6px; text-align: center; }
</style>
</head>
<body>

<!-- Tela 1: Início -->
<div id="screen1" class="screen active">
  <h1>O Rei da Várzea</h1>
  <button id="btnStart">Escalar Time</button>
</div>

<!-- Tela 2: Escalação -->
<div id="screen2" class="screen">
  <h2>Escalação do seu time</h2>
  <p id="position-instruction"></p>
  <table>
    <thead>
      <tr><th>Jogador</th><th>Posição</th><th>Ação</th></tr>
    </thead>
    <tbody id="playersTable"></tbody>
  </table>
  <button id="btnNextPosition">Próxima posição</button>
  <button id="btnDone">Confirmar Escalação</button>
</div>

<!-- Tela 3: Confirmar Times -->
<div id="screen3" class="screen">
  <h2>Seu time: <span id="user-team-name"></span></h2>
  <ul id="userTeamList"></ul>
  <h2>Adversário: Vila Freitas</h2>
  <ul id="opponentTeamList"></ul>
  <button id="btnPlayMatch">Jogar Partida</button>
</div>

<!-- Tela 4: Partida -->
<div id="screen4" class="screen">
  <h2>Partida</h2>
  <p><strong><span id="user-team-name2"></span></strong> x <strong>Vila Freitas</strong></p>
  
  <h3>Time Titular - <span id="user-team-name3"></span></h3>
  <ul id="jogadoresUsuario"></ul>
  <h3>Banco de Reservas - <span id="user-team-name4"></span></h3>
  <ul id="reservasUsuario"></ul>

  <h3>Time Titular - Vila Freitas</h3>
  <ul id="jogadoresVila"></ul>
  <h3>Banco de Reservas - Vila Freitas</h3>
  <ul id="reservasVila"></ul>
  
  <h3>Resultado</h3>
  <p id="resultado"></p>
  <div id="comentarios"></div>
  <button id="btnContinue">Continuar</button>
</div>

<script>
const screens = {
  1: document.getElementById('screen1'),
  2: document.getElementById('screen2'),
  3: document.getElementById('screen3'),
  4: document.getElementById('screen4')
};

function showScreen(n) {
  for (let i=1; i<=4; i++) screens[i].classList.remove('active');
  screens[n].classList.add('active');
}

const positions = ["Goleiro", "Zagueiro", "Lateral", "Meia", "Atacante"];
let currentPositionIndex = 0;
let userTeam = [];
let userReserves = [];
let opponentTeam = [];
let opponentReserves = [];
let players = [
  {name:"João", pos:"Goleiro"},
  {name:"Pedro", pos:"Zagueiro"},
  {name:"Lucas", pos:"Zagueiro"},
  {name:"Mateus", pos:"Lateral"},
  {name:"Tiago", pos:"Lateral"},
  {name:"Rafael", pos:"Meia"},
  {name:"Bruno", pos:"Meia"},
  {name:"Carlos", pos:"Atacante"},
  {name:"Eduardo", pos:"Atacante"},
  {name:"Marcos", pos:"Atacante"}
];

document.getElementById('btnStart').addEventListener('click', ()=>{
  currentPositionIndex = 0;
  userTeam = [];
  userReserves = [];
  showPlayersForPosition();
  showScreen(2);
});

function showPlayersForPosition() {
  const pos = positions[currentPositionIndex];
  document.getElementById('position-instruction').innerText = "Escolha jogadores para posição: " + pos;
  const tbody = document.getElementById('playersTable');
  tbody.innerHTML = "";
  players.forEach((p, idx)=>{
    if (p.pos === pos) {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${p.name}</td><td>${p.pos}</td>
        <td><button onclick="selectPlayer(${idx})">Escalar</button></td>`;
      tbody.appendChild(tr);
    }
  });
}

window.selectPlayer = function(idx) {
  userTeam.push(players[idx]);
  players.splice(idx,1);
  showPlayersForPosition();
}

document.getElementById('btnNextPosition').addEventListener('click', ()=>{
  if (currentPositionIndex < positions.length-1) {
    currentPositionIndex++;
    showPlayersForPosition();
  }
});

document.getElementById('btnDone').addEventListener('click', ()=>{
  // Definir reservas do usuário
  userReserves = [...players];
  // Criar adversário simples
  opponentTeam = [
    {name:"Vila Goleiro", pos:"Goleiro"},
    {name:"Vila Zagueiro", pos:"Zagueiro"},
    {name:"Vila Lateral", pos:"Lateral"},
    {name:"Vila Meia", pos:"Meia"},
    {name:"Vila Atacante", pos:"Atacante"}
  ];
  opponentReserves = [
    {name:"Vila Reserva 1", pos:"Meia"},
    {name:"Vila Reserva 2", pos:"Atacante"}
  ];
  
  document.getElementById('user-team-name').innerText = "Seu Time";
  const ul = document.getElementById('userTeamList');
  ul.innerHTML = "";
  userTeam.forEach(p=>{
    const li = document.createElement('li');
    li.innerText = p.name+" - "+p.pos;
    ul.appendChild(li);
  });
  const ul2 = document.getElementById('opponentTeamList');
  ul2.innerHTML = "";
  opponentTeam.forEach(p=>{
    const li = document.createElement('li');
    li.innerText = p.name+" - "+p.pos;
    ul2.appendChild(li);
  });
  showScreen(3);
});

document.getElementById('btnPlayMatch').addEventListener('click', ()=>{
  document.getElementById('user-team-name2').innerText = "Seu Time";
  document.getElementById('user-team-name3').innerText = "Seu Time";
  document.getElementById('user-team-name4').innerText = "Seu Time";
  
  const jogadoresUsuario = document.getElementById('jogadoresUsuario');
  jogadoresUsuario.innerHTML = "";
  userTeam.forEach(p=>{
    const li = document.createElement('li');
    li.innerText = p.name+" - "+p.pos;
    jogadoresUsuario.appendChild(li);
  });

  const reservasUsuario = document.getElementById('reservasUsuario');
  reservasUsuario.innerHTML = "";
  userReserves.forEach(p=>{
    const li = document.createElement('li');
    li.innerText = p.name+" - "+p.pos;
    reservasUsuario.appendChild(li);
  });

  const jogadoresVila = document.getElementById('jogadoresVila');
  jogadoresVila.innerHTML = "";
  opponentTeam.forEach(p=>{
    const li = document.createElement('li');
    li.innerText = p.name+" - "+p.pos;
    jogadoresVila.appendChild(li);
  });

  const reservasVila = document.getElementById('reservasVila');
  reservasVila.innerHTML = "";
  opponentReserves.forEach(p=>{
    const li = document.createElement('li');
    li.innerText = p.name+" - "+p.pos;
    reservasVila.appendChild(li);
  });

  // Simulação de resultado
  const golUser = Math.floor(Math.random()*5);
  const golVila = Math.floor(Math.random()*5);
  document.getElementById('resultado').innerText = `Placar: Seu Time ${golUser} x ${golVila} Vila Freitas`;
  const comentarios = document.getElementById('comentarios');
  comentarios.innerHTML = "<p>Jogo emocionante na várzea!</p>";
  
  showScreen(4);
});

document.getElementById('btnContinue').addEventListener('click', ()=>{
  userTeam = [];
  userReserves = [];
  players = [
    {name:"João", pos:"Goleiro"},
    {name:"Pedro", pos:"Zagueiro"},
    {name:"Lucas", pos:"Zagueiro"},
    {name:"Mateus", pos:"Lateral"},
    {name:"Tiago", pos:"Lateral"},
    {name:"Rafael", pos:"Meia"},
    {name:"Bruno", pos:"Meia"},
    {name:"Carlos", pos:"Atacante"},
    {name:"Eduardo", pos:"Atacante"},
    {name:"Marcos", pos:"Atacante"}
  ];
  currentPositionIndex = 0;
  showPlayersForPosition();
  showScreen(2);
});
</script>
</body>
</html>
