<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Escalação de Time</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  table { border-collapse: collapse; width: 100%; margin-bottom: 10px; }
  th, td { border: 1px solid #ccc; padding: 5px; text-align: center; }
  button { padding: 5px 10px; margin: 2px; }
  #tela2 { display: none; }
</style>
</head>
<body>

<!-- TELA 1 -->
<div id="tela1">
  <h2>Bem-vindo ao Jogo de Futebol</h2>
  <button id="btnToTela2">Escalar Time</button>
</div>

<!-- TELA 2 -->
<div id="tela2">
  <h2>Mercado de Jogadores</h2>
  <p id="marketMessage"></p>
  <table id="playersTable">
    <thead>
      <tr>
        <th>Nome</th>
        <th>Posição</th>
        <th>Prof.</th>
        <th>Idade</th>
        <th>Salário</th>
        <th>Saúde</th>
        <th>Ação</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <button id="btnNextStep">Próximo</button>
  <p>Dinheiro disponível: <span id="cashDisplay">1000000</span></p>
  <p>Jogadores contratados: <span id="selectedCountDisplay">0</span> / 22</p>
  <h3>Elenco Contratado</h3>
  <ul id="bancoPlayers"></ul>
  <button id="btnEscalar" disabled>Escalar Time</button>
</div>

<script>
/* VARIÁVEIS GLOBAIS */
let cash = 1000000;
let selectedPlayers = [];
let bancoPlayers = [];
let marketStep = 0;

const allPlayers = [
  {name:'Alisson', pos:'Goleiro', prof:'A', age:30, salary:50000, health:95},
  {name:'Ederson', pos:'Goleiro', prof:'A', age:29, salary:48000, health:96},
  {name:'Dani Alves', pos:'Lateral', prof:'A', age:40, salary:40000, health:90},
  {name:'Marcelo', pos:'Lateral', prof:'A', age:34, salary:38000, health:92},
  {name:'Thiago Silva', pos:'Zagueiro', prof:'A', age:38, salary:45000, health:93},
  {name:'Marquinhos', pos:'Zagueiro', prof:'A', age:29, salary:42000, health:94},
  {name:'Casemiro', pos:'Meia', prof:'A', age:31, salary:47000, health:91},
  {name:'Paquetá', pos:'Meia', prof:'A', age:25, salary:36000, health:95},
  {name:'Neymar', pos:'Atacante', prof:'A', age:31, salary:70000, health:90},
  {name:'Gabriel Jesus', pos:'Atacante', prof:'A', age:25, salary:52000, health:92}
];

const steps = [
  { msg:'Contrate os goleiros disponíveis', filter:['Goleiro'] },
  { msg:'Contrate os laterais disponíveis', filter:['Lateral'] },
  { msg:'Contrate os zagueiros disponíveis', filter:['Zagueiro'] },
  { msg:'Contrate os meias disponíveis', filter:['Meia'] },
  { msg:'Contrate os atacantes disponíveis', filter:['Atacante'] },
];

/* ELEMENTOS */
const tela1 = document.getElementById('tela1');
const tela2 = document.getElementById('tela2');
const playersTable = document.getElementById('playersTable').querySelector('tbody');
const marketMessage = document.getElementById('marketMessage');
const btnNextStep = document.getElementById('btnNextStep');
const btnToTela2 = document.getElementById('btnToTela2');
const cashDisplay = document.getElementById('cashDisplay');
const selectedCountDisplay = document.getElementById('selectedCountDisplay');
const bancoPlayersList = document.getElementById('bancoPlayers');
const btnEscalar = document.getElementById('btnEscalar');

/* FUNÇÕES */
function renderBanco(){
  bancoPlayersList.innerHTML='';
  bancoPlayers.forEach(p=>{
    const li=document.createElement('li');
    li.textContent=`${p.name} (${p.pos}) - R$ ${p.salary}`;
    bancoPlayersList.appendChild(li);
  });
}

function renderMarket(){
  const step = steps[marketStep];
  marketMessage.textContent = step.msg;
  playersTable.innerHTML = '';
  
  allPlayers.filter(p => step.filter.includes(p.pos)).forEach((p, i) => {
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${p.name}</td>
                    <td>${p.pos}</td>
                    <td>${p.prof}</td>
                    <td>${p.age}</td>
                    <td>R$ ${p.salary}</td>
                    <td>${p.health}%</td>
                    <td><button ${selectedPlayers.includes(p.name)?'disabled':''} data-name="${p.name}">Contratar</button></td>`;
    playersTable.appendChild(tr);
  });

  playersTable.querySelectorAll('button').forEach(btn=>{
    btn.addEventListener('click', e=>{
      const playerName = btn.dataset.name;
      const player = allPlayers.find(p=>p.name===playerName);
      if(cash>=player.salary && selectedPlayers.length<22){
        cash -= player.salary;
        selectedPlayers.push(player.name);
        bancoPlayers.push(player);
        cashDisplay.textContent = `R$ ${cash}`;
        selectedCountDisplay.textContent = selectedPlayers.length;
        renderMarket();
        renderBanco();
        btnEscalar.disabled = selectedPlayers.length !== 22;
      } else {
        alert('Saldo insuficiente ou elenco completo');
      }
    });
  });
}

/* EVENTOS */
btnNextStep.addEventListener('click', ()=>{
  if(marketStep < steps.length - 1){
    marketStep++;
    renderMarket();
  } else {
    alert('Todos os passos concluídos!');
  }
});

btnToTela2.addEventListener('click', ()=>{
  tela1.style.display='none';
  tela2.style.display='block';
  marketStep = 0;
  renderMarket();
});
</script>
</body>
</html>
